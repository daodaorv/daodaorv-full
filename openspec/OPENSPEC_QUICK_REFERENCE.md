# OpenSpec å¿«é€Ÿå‚è€ƒå¡ç‰‡

æœ¬æ–‡æ¡£æä¾› OpenSpec å·¥ä½œæµçš„å¿«é€Ÿå‚è€ƒï¼Œé€‚åˆåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¿«é€ŸæŸ¥é˜…ã€‚

---

## ğŸš€ ä¸‰é˜¶æ®µå·¥ä½œæµ (ä¸€å›¾çœ‹æ‡‚)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OpenSpec ä¸‰é˜¶æ®µå·¥ä½œæµ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 1: åˆ›å»ºææ¡ˆ     â”‚
â”‚ (Proposal)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ 1. openspec list
           â”œâ”€ 2. openspec list --specs
           â”œâ”€ 3. åˆ›å»º proposal.md, tasks.md, specs/
           â”œâ”€ 4. openspec validate <change-id> --strict
           â””â”€ 5. ç­‰å¾…å®¡æ‰¹
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 2: å®ç°å˜æ›´     â”‚
â”‚ (Apply)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ 1. é˜…è¯» proposal.md, tasks.md
           â”œâ”€ 2. æŒ‰é¡ºåºå®ç°ä»»åŠ¡
           â”œâ”€ 3. ç¼–å†™æµ‹è¯•
           â”œâ”€ 4. npm test (100% é€šè¿‡ç‡)
           â””â”€ 5. æ›´æ–° tasks.md æ ‡è®° [x]
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 3: å½’æ¡£å˜æ›´     â”‚
â”‚ (Archive)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ 1. ç¡®è®¤æ‰€æœ‰ä»»åŠ¡å®Œæˆ
           â”œâ”€ 2. ç¡®è®¤æ‰€æœ‰æµ‹è¯•é€šè¿‡
           â”œâ”€ 3. openspec archive <change-id> --yes
           â””â”€ 4. openspec validate --strict
```

---

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨

### æŸ¥çœ‹å‘½ä»¤

| å‘½ä»¤                          | ç”¨é€”                     | ç¤ºä¾‹                                    |
| ----------------------------- | ------------------------ | --------------------------------------- |
| `openspec list`               | æŸ¥çœ‹æ´»åŠ¨çš„å˜æ›´           | `openspec list`                         |
| `openspec list --specs`       | æŸ¥çœ‹ç°æœ‰çš„è§„èŒƒ           | `openspec list --specs`                 |
| `openspec show <item>`        | æŸ¥çœ‹å˜æ›´æˆ–è§„èŒƒè¯¦æƒ…       | `openspec show add-two-factor-auth`     |
| `openspec show <item> --json` | æŸ¥çœ‹ JSON æ ¼å¼è¯¦æƒ…       | `openspec show add-two-factor-auth --json` |
| `openspec spec list --long`   | æŸ¥çœ‹è§„èŒƒåˆ—è¡¨ (è¯¦ç»†)      | `openspec spec list --long`             |

### éªŒè¯å‘½ä»¤

| å‘½ä»¤                                  | ç”¨é€”                     | ç¤ºä¾‹                                          |
| ------------------------------------- | ------------------------ | --------------------------------------------- |
| `openspec validate <change-id>`       | éªŒè¯å˜æ›´                 | `openspec validate add-two-factor-auth`       |
| `openspec validate <change-id> --strict` | ä¸¥æ ¼éªŒè¯å˜æ›´          | `openspec validate add-two-factor-auth --strict` |
| `openspec validate`                   | æ‰¹é‡éªŒè¯æ¨¡å¼             | `openspec validate`                           |
| `openspec validate --strict`          | ä¸¥æ ¼éªŒè¯æ‰€æœ‰             | `openspec validate --strict`                  |

### å½’æ¡£å‘½ä»¤

| å‘½ä»¤                                      | ç”¨é€”                     | ç¤ºä¾‹                                              |
| ----------------------------------------- | ------------------------ | ------------------------------------------------- |
| `openspec archive <change-id>`            | å½’æ¡£å˜æ›´ (äº¤äº’å¼)        | `openspec archive add-two-factor-auth`            |
| `openspec archive <change-id> --yes`      | å½’æ¡£å˜æ›´ (éäº¤äº’å¼)      | `openspec archive add-two-factor-auth --yes`      |
| `openspec archive <change-id> --skip-specs --yes` | å½’æ¡£å˜æ›´ (è·³è¿‡è§„èŒƒæ›´æ–°) | `openspec archive add-two-factor-auth --skip-specs --yes` |

### é¡¹ç›®ç®¡ç†å‘½ä»¤

| å‘½ä»¤                  | ç”¨é€”                     | ç¤ºä¾‹                    |
| --------------------- | ------------------------ | ----------------------- |
| `openspec init [path]` | åˆå§‹åŒ– OpenSpec         | `openspec init`         |
| `openspec update [path]` | æ›´æ–°æŒ‡ä»¤æ–‡ä»¶           | `openspec update`       |

### è°ƒè¯•å‘½ä»¤

| å‘½ä»¤                                          | ç”¨é€”                     | ç¤ºä¾‹                                                  |
| --------------------------------------------- | ------------------------ | ----------------------------------------------------- |
| `openspec show <change> --json --deltas-only` | æŸ¥çœ‹å¢é‡è¯¦æƒ… (JSON)      | `openspec show add-two-factor-auth --json --deltas-only` |
| `openspec show <spec> --json -r 1`            | æŸ¥çœ‹ç‰¹å®šéœ€æ±‚             | `openspec show auth --json -r 1`                      |

---

## ğŸ“ æ–‡ä»¶ç»“æ„é€ŸæŸ¥

### å˜æ›´ææ¡ˆç›®å½•ç»“æ„

```
openspec/changes/<change-id>/
â”œâ”€â”€ proposal.md          # ä¸ºä»€ä¹ˆã€æ”¹ä»€ä¹ˆã€å½±å“
â”œâ”€â”€ tasks.md             # å®ç°æ¸…å•
â”œâ”€â”€ design.md            # æŠ€æœ¯å†³ç­– (å¯é€‰)
â””â”€â”€ specs/
    â””â”€â”€ <capability>/
        â””â”€â”€ spec.md      # ADDED/MODIFIED/REMOVED
```

### proposal.md æ¨¡æ¿

```markdown
## Why

[1-2 å¥è¯è¯´æ˜é—®é¢˜/æœºä¼š]

## What Changes

- [å˜æ›´åˆ—è¡¨]
- [ç”¨ **BREAKING** æ ‡è®°ç ´åæ€§å˜æ›´]

## Impact

- å—å½±å“çš„è§„èŒƒ: [åˆ—å‡ºèƒ½åŠ›]
- å—å½±å“çš„ä»£ç : [å…³é”®æ–‡ä»¶/ç³»ç»Ÿ]
```

### tasks.md æ¨¡æ¿

```markdown
## 1. æ•°æ®åº“è®¾ç½®

- [ ] 1.1 åˆ›å»ºæ•°æ®åº“æ¶æ„
- [ ] 1.2 æ·»åŠ è¿ç§»è„šæœ¬

## 2. åç«¯å®ç°

- [ ] 2.1 å®ç° API ç«¯ç‚¹
- [ ] 2.2 æ·»åŠ ä¸šåŠ¡é€»è¾‘
- [ ] 2.3 ç¼–å†™å•å…ƒæµ‹è¯•
```

### specs/<capability>/spec.md æ¨¡æ¿

```markdown
## ADDED Requirements

### Requirement: æ–°åŠŸèƒ½åç§°

ç³»ç»Ÿåº”è¯¥æä¾›...

#### Scenario: æˆåŠŸæ¡ˆä¾‹

- **WHEN** ç”¨æˆ·æ‰§è¡Œæ“ä½œ
- **THEN** é¢„æœŸç»“æœ

## MODIFIED Requirements

### Requirement: ç°æœ‰åŠŸèƒ½åç§°

[å®Œæ•´çš„ä¿®æ”¹åçš„éœ€æ±‚æ–‡æœ¬]

#### Scenario: æ›´æ–°çš„åœºæ™¯

- **WHEN** æ¡ä»¶
- **THEN** ç»“æœ

## REMOVED Requirements

### Requirement: æ—§åŠŸèƒ½åç§°

**åŸå› **: [ä¸ºä»€ä¹ˆç§»é™¤]
**è¿ç§»**: [å¦‚ä½•å¤„ç†]
```

---

## âš ï¸ å¸¸è§é”™è¯¯å’Œå¿«é€Ÿä¿®å¤

### é”™è¯¯ 1: "Change must have at least one delta"

**åŸå› **: ç¼ºå°‘è§„èŒƒå¢é‡æ–‡ä»¶

**å¿«é€Ÿä¿®å¤**:

```bash
mkdir -p openspec/changes/<change-id>/specs/<capability>
# ç¼–è¾‘ openspec/changes/<change-id>/specs/<capability>/spec.md
```

### é”™è¯¯ 2: "Requirement must have at least one scenario"

**åŸå› **: åœºæ™¯æ ¼å¼é”™è¯¯

**å¿«é€Ÿä¿®å¤**:

```markdown
<!-- é”™è¯¯æ ¼å¼ -->
- **Scenario: ç”¨æˆ·ç™»å½•** âŒ
**Scenario**: ç”¨æˆ·ç™»å½• âŒ
### Scenario: ç”¨æˆ·ç™»å½• âŒ

<!-- æ­£ç¡®æ ¼å¼ -->
#### Scenario: ç”¨æˆ·ç™»å½•æˆåŠŸ âœ…

- **WHEN** æä¾›æœ‰æ•ˆå‡­è¯
- **THEN** è¿”å› JWT ä»¤ç‰Œ
```

### é”™è¯¯ 3: "Silent scenario parsing failures"

**åŸå› **: åœºæ™¯æ ¼å¼ä¸å®Œå…¨æ­£ç¡®

**å¿«é€Ÿä¿®å¤**:

```bash
# è°ƒè¯•åœºæ™¯è§£æ
openspec show <change-id> --json --deltas-only

# æ£€æŸ¥åœºæ™¯æ ¼å¼
# å¿…é¡»ä½¿ç”¨: #### Scenario: åç§°
```

---

## ğŸ¯ ä½•æ—¶éœ€è¦åˆ›å»ºææ¡ˆ?

### âœ… éœ€è¦åˆ›å»ºææ¡ˆ

- æ·»åŠ æ–°åŠŸèƒ½æˆ–èƒ½åŠ›
- è¿›è¡Œç ´åæ€§å˜æ›´ (APIã€æ•°æ®åº“æ¶æ„)
- ä¿®æ”¹æ¶æ„æˆ–è®¾è®¡æ¨¡å¼
- æ€§èƒ½ä¼˜åŒ– (æ”¹å˜è¡Œä¸º)
- æ›´æ–°å®‰å…¨æ¨¡å¼

### âŒ æ— éœ€åˆ›å»ºææ¡ˆ (å¯ç›´æ¥ä¿®å¤)

- Bug ä¿®å¤ (æ¢å¤é¢„æœŸè¡Œä¸º)
- æ‹¼å†™é”™è¯¯ã€æ ¼å¼åŒ–ã€æ³¨é‡Š
- ä¾èµ–æ›´æ–° (éç ´åæ€§)
- é…ç½®å˜æ›´
- ä¸ºç°æœ‰è¡Œä¸ºæ·»åŠ æµ‹è¯•

---

## ğŸ”§ å˜æ›´ ID å‘½åè§„åˆ™

### å‘½åè§„åˆ™

- ä½¿ç”¨ kebab-case (å°å†™,è¿å­—ç¬¦åˆ†éš”)
- åŠ¨è¯å¼€å¤´: `add-`, `update-`, `remove-`, `refactor-`
- ç®€çŸ­ä¸”æè¿°æ€§
- ç¡®ä¿å”¯ä¸€æ€§

### ç¤ºä¾‹

| âœ… æ­£ç¡®                    | âŒ é”™è¯¯                  |
| -------------------------- | ------------------------ |
| `add-profile-filters`      | `new_feature`            |
| `update-payment-flow`      | `AddProfileFilters`      |
| `remove-legacy-api`        | `profile filters`        |
| `refactor-auth-service`    | `add-feature-123`        |

---

## ğŸ“Š è§„èŒƒå¢é‡æ“ä½œæ ‡è®°

| æ“ä½œæ ‡è®°              | ç”¨é€”                     | ä½•æ—¶ä½¿ç”¨                                   |
| --------------------- | ------------------------ | ------------------------------------------ |
| `## ADDED Requirements` | æ–°èƒ½åŠ›                   | å¼•å…¥æ–°çš„ç‹¬ç«‹èƒ½åŠ›æˆ–å­èƒ½åŠ›                   |
| `## MODIFIED Requirements` | ä¿®æ”¹è¡Œä¸º              | æ”¹å˜ç°æœ‰éœ€æ±‚çš„è¡Œä¸ºã€èŒƒå›´æˆ–éªŒæ”¶æ ‡å‡†         |
| `## REMOVED Requirements` | åºŸå¼ƒåŠŸèƒ½               | ç§»é™¤ç°æœ‰åŠŸèƒ½                               |
| `## RENAMED Requirements` | åç§°å˜æ›´               | ä»…æ”¹å˜éœ€æ±‚åç§° (å¦‚æœåŒæ—¶æ”¹å˜è¡Œä¸º,ä½¿ç”¨ MODIFIED) |

### MODIFIED çš„æ­£ç¡®ç”¨æ³•

1. åœ¨ `openspec/specs/<capability>/spec.md` ä¸­æ‰¾åˆ°ç°æœ‰éœ€æ±‚
2. å¤åˆ¶æ•´ä¸ªéœ€æ±‚å— (ä» `### Requirement: ...` åˆ°æ‰€æœ‰åœºæ™¯)
3. ç²˜è´´åˆ° `## MODIFIED Requirements` ä¸‹å¹¶ç¼–è¾‘
4. ç¡®ä¿æ ‡é¢˜æ–‡æœ¬å®Œå…¨åŒ¹é… (å¿½ç•¥ç©ºæ ¼)
5. ä¿ç•™è‡³å°‘ä¸€ä¸ª `#### Scenario:`

---

## ğŸš¦ å¼€å‘å‰æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹ä»»ä½•å¼€å‘å·¥ä½œå‰,ç¡®ä¿å®Œæˆä»¥ä¸‹æ£€æŸ¥:

- [ ] é˜…è¯» `openspec/project.md` äº†è§£é¡¹ç›®ä¸Šä¸‹æ–‡
- [ ] é˜…è¯» `openspec/DEVELOPMENT_CHECKLIST.md` äº†è§£å¼€å‘æ£€æŸ¥æ¸…å•
- [ ] è¿è¡Œ `openspec list` æ£€æŸ¥æ˜¯å¦æœ‰å†²çªçš„å˜æ›´
- [ ] è¿è¡Œ `openspec list --specs` äº†è§£ç°æœ‰åŠŸèƒ½
- [ ] æŸ¥çœ‹ç›¸å…³æŠ€æœ¯æ–‡æ¡£ (`docs/æŠ€æœ¯è§„èŒƒæ‰‹å†Œ.md`, `docs/æ•°æ®å­—å…¸.md`)

---

## ğŸ¯ å®Œæ•´å·¥ä½œæµç¤ºä¾‹ (30 ç§’é€Ÿè§ˆ)

```bash
# 1. æ£€æŸ¥ç°æœ‰çŠ¶æ€
openspec list
openspec list --specs

# 2. åˆ›å»ºå˜æ›´ç›®å½•
mkdir -p openspec/changes/add-two-factor-auth/specs/auth

# 3. åˆ›å»ºææ¡ˆæ–‡ä»¶
# ç¼–è¾‘ proposal.md, tasks.md, specs/auth/spec.md

# 4. éªŒè¯ææ¡ˆ
openspec validate add-two-factor-auth --strict

# 5. å®ç°å˜æ›´
# ... ç¼–å†™ä»£ç  ...
npm test

# 6. æ›´æ–°ä»»åŠ¡çŠ¶æ€
# ç¼–è¾‘ tasks.md, å°†æ‰€æœ‰ä»»åŠ¡æ ‡è®°ä¸º [x]

# 7. å½’æ¡£å˜æ›´
openspec archive add-two-factor-auth --yes

# 8. éªŒè¯å½’æ¡£
openspec validate --strict
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®Œæ•´æŒ‡å—**: `openspec/OPENSPEC_WORKFLOW_GUIDE.md` (300+ è¡Œ)
- **å¼ºåˆ¶æ‰§è¡Œè§„åˆ™**: `openspec/AGENTS.md` (553 è¡Œ)
- **å¼€å‘æ£€æŸ¥æ¸…å•**: `openspec/DEVELOPMENT_CHECKLIST.md` (235 è¡Œ)
- **é¡¹ç›®ä¸Šä¸‹æ–‡**: `openspec/project.md` (340+ è¡Œ)
- **å®˜æ–¹æ–‡æ¡£**: https://github.com/Fission-AI/OpenSpec

---

**è®°ä½**: è§„èŒƒæ˜¯çœŸç›¸ã€‚å˜æ›´æ˜¯ææ¡ˆã€‚ä¿æŒå®ƒä»¬åŒæ­¥ã€‚

