# Spec: 小程序首页内容展示功能

**Capability**: `home-page`
**Version**: 1.0.0
**Status**: Draft

---

## ADDED Requirements

### Requirement: 顶部公告栏展示

系统 SHALL 在首页顶部展示平台公告和活动通知，MUST 支持横向滚动播放多条公告。

#### Scenario: 展示单条公告

- **WHEN** 管理端配置了 1 条公告
- **THEN** 公告栏显示该公告内容
- **AND** 公告内容横向滚动播放
- **AND** 点击公告栏跳转到公告详情页

#### Scenario: 展示多条公告轮播

- **WHEN** 管理端配置了 3 条公告
- **THEN** 公告栏自动轮播显示 3 条公告
- **AND** 每条公告显示 3 秒后切换到下一条
- **AND** 点击任意公告跳转到对应详情页

#### Scenario: 用户关闭公告栏

- **WHEN** 用户点击公告栏关闭按钮
- **THEN** 公告栏隐藏
- **AND** 当天不再显示该公告栏
- **AND** 次日重新显示

---

### Requirement: 轮播广告展示

系统 SHALL 在首页展示营销活动轮播图，MUST 支持自动播放和手动滑动。

#### Scenario: 展示轮播图

- **WHEN** 管理端配置了 5 张轮播图
- **THEN** 轮播图自动播放显示 5 张图片
- **AND** 每张图片显示 3 秒后切换到下一张
- **AND** 底部显示圆点指示器，当前页高亮
- **AND** 支持用户手动左右滑动切换

#### Scenario: 点击轮播图跳转

- **WHEN** 用户点击某张轮播图
- **THEN** 跳转到对应的活动页面或详情页

---

### Requirement: 房车预订模块

系统 SHALL 在首页提供房车预订快速入口，MUST 支持城市、门店、时间选择，一键查询可用房车。

#### Scenario: 默认定位城市

- **WHEN** 用户首次进入首页
- **THEN** 自动获取用户所在城市定位
- **AND** 城市选择器显示定位城市
- **AND** 门店选择器显示该城市的门店列表

#### Scenario: 手动切换城市

- **WHEN** 用户点击城市选择器
- **THEN** 弹出城市选择弹窗
- **AND** 显示所有有服务的城市列表
- **WHEN** 用户选择新城市
- **THEN** 城市选择器更新为新城市
- **AND** 门店选择器自动更新为新城市的门店列表
- **AND** 缓存用户选择的城市到 localStorage

#### Scenario: 选择取车和还车时间

- **WHEN** 用户点击取车时间选择器
- **THEN** 弹出日期时间选择器
- **AND** 默认显示当前时间 + 1 小时（整点）
- **WHEN** 用户选择取车时间后点击还车时间选择器
- **THEN** 还车时间默认为取车时间 + 2 天
- **AND** 还车时间不能早于取车时间
- **WHEN** 用户选择完取车和还车时间
- **THEN** 自动计算并显示租期天数

#### Scenario: 查询可用房车

- **WHEN** 用户选择了城市、门店、取车时间、还车时间
- **AND** 用户点击"查询可用房车"按钮
- **THEN** 跳转到房车列表页
- **AND** 传递查询参数（城市、门店、取车时间、还车时间）
- **AND** 房车列表页根据参数查询可用房车

---

### Requirement: 优惠券广告展示

系统 SHALL 在首页展示优惠券推广横幅，MUST 引导用户领取优惠券。

#### Scenario: 展示优惠券广告

- **WHEN** 管理端配置了优惠券广告
- **THEN** 首页显示优惠券横幅
- **AND** 横幅显示优惠券活动标题和图片

#### Scenario: 点击优惠券广告

- **WHEN** 用户点击优惠券广告
- **THEN** 跳转到优惠券列表页

---

### Requirement: 金刚区服务入口

系统 SHALL 在首页展示 8 个特色服务入口，MUST 提供快速访问平台核心功能的能力。

#### Scenario: 展示金刚区

- **WHEN** 用户浏览首页
- **THEN** 金刚区显示 8 个图标入口
- **AND** 每个入口显示图标和名称
- **AND** 入口顺序为：特惠租车、房车租赁、营地预订、定制旅游、众筹房车、推广分享、加盟合作、PLUS 会员

#### Scenario: 点击金刚区入口

- **WHEN** 用户点击"特惠租车"入口
- **THEN** 跳转到特惠租车列表页
- **WHEN** 用户点击"房车租赁"入口
- **THEN** 跳转到房车列表页
- **WHEN** 用户点击"营地预订"入口
- **THEN** 跳转到营地列表页
- **WHEN** 用户点击"定制旅游"入口
- **THEN** 跳转到定制旅游列表页
- **WHEN** 用户点击"众筹房车"入口
- **THEN** 跳转到众筹项目列表页
- **WHEN** 用户点击"推广分享"入口
- **THEN** 跳转到推广首页
- **WHEN** 用户点击"加盟合作"入口
- **THEN** 跳转到分销加盟页
- **WHEN** 用户点击"PLUS 会员"入口
- **THEN** 跳转到 PLUS 会员页

---

### Requirement: 推荐内容展示

系统 SHALL 在首页展示动态推荐内容，MUST 包括热门众筹、营地、旅游路线、社区内容。

#### Scenario: 展示推荐内容

- **WHEN** 用户浏览首页
- **THEN** 推荐内容区显示多种类型的推荐内容
- **AND** 包括热门众筹房车、优质营地、热门旅游路线、社区精选内容
- **AND** 每个推荐内容显示标题、图片、简介

#### Scenario: 点击推荐内容

- **WHEN** 用户点击某个推荐内容
- **THEN** 跳转到对应的详情页

---

### Requirement: 页面性能优化

系统 SHALL 优化首页加载性能，MUST 确保首屏加载时间 < 2 秒。

#### Scenario: 首屏快速加载

- **WHEN** 用户进入首页
- **THEN** 首屏内容在 2 秒内加载完成
- **AND** 关键内容优先加载（公告栏、轮播图、房车预订模块）
- **AND** 推荐内容延迟加载

#### Scenario: 图片优化

- **WHEN** 首页加载图片
- **THEN** 轮播图使用懒加载
- **AND** 图片格式优先使用 WebP
- **AND** 图片大小压缩优化

#### Scenario: 缓存策略

- **WHEN** 用户再次进入首页
- **THEN** 金刚区和推荐内容使用缓存（30 分钟有效期）
- **AND** 减少重复请求

---

### Requirement: 下拉刷新

系统 SHALL 支持首页下拉刷新，MUST 重新加载最新数据。

#### Scenario: 下拉刷新

- **WHEN** 用户在首页下拉
- **THEN** 显示刷新动画
- **AND** 重新请求所有数据（公告、轮播图、推荐内容）
- **AND** 刷新完成后隐藏动画
- **AND** 显示最新数据
