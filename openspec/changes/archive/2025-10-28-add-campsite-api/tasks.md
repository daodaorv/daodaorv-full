# 营地管理 API 开发任务清单

## Phase 1: 数据模型层 ⏳

### 任务 1.1: 创建营地实体
- [ ] 创建 `Campsite.ts` 实体
- [ ] 定义营地基本信息字段
- [ ] 定义预订模式枚举
- [ ] 定义营地状态枚举

### 任务 1.2: 创建营地设施实体
- [ ] 创建 `CampsiteFacility.ts` 实体
- [ ] 定义设施类型枚举
- [ ] 关联营地

### 任务 1.3: 创建营位实体
- [ ] 创建 `CampsiteSpot.ts` 实体
- [ ] 定义营位类型枚举
- [ ] 定义价格和库存字段
- [ ] 关联营地

### 任务 1.4: 创建营地预订实体
- [ ] 创建 `CampsiteBooking.ts` 实体
- [ ] 定义预订状态枚举
- [ ] 关联用户、营地、营位
- [ ] 定义支付信息字段

### 任务 1.5: 创建营地咨询实体
- [ ] 创建 `CampsiteInquiry.ts` 实体
- [ ] 定义咨询状态枚举
- [ ] 关联用户和营地

### 任务 1.6: 创建营地评价实体
- [ ] 创建 `CampsiteReview.ts` 实体
- [ ] 定义评分字段
- [ ] 关联用户、营地、订单

## Phase 2: 营地信息管理 ⏳

### 任务 2.1: 创建营地服务
- [ ] 创建 `campsite.service.ts`
- [ ] 实现创建营地
- [ ] 实现查询营地（列表、详情）
- [ ] 实现更新营地
- [ ] 实现删除营地
- [ ] 实现切换预订模式
- [ ] 实现切换营地状态

### 任务 2.2: 创建营地控制器
- [ ] 创建 `campsite.controller.ts`
- [ ] 实现用户端 API（列表、详情）
- [ ] 实现管理端 API（CRUD、状态管理）

## Phase 3: 营位库存管理 ⏳

### 任务 3.1: 创建营位服务
- [ ] 创建 `campsite-spot.service.ts`
- [ ] 实现营位创建和更新
- [ ] 实现库存查询
- [ ] 实现库存扣减
- [ ] 实现库存释放

### 任务 3.2: 创建营位控制器
- [ ] 创建 `campsite-spot.controller.ts`
- [ ] 实现营位查询 API
- [ ] 实现管理端营位管理 API

## Phase 4: 营地预订管理 ⏳

### 任务 4.1: 创建预订服务
- [ ] 创建 `campsite-booking.service.ts`
- [ ] 实现创建预订
- [ ] 实现查询预订（列表、详情）
- [ ] 实现取消预订
- [ ] 实现退款逻辑
- [ ] 集成钱包服务

### 任务 4.2: 创建预订控制器
- [ ] 创建 `campsite-booking.controller.ts`
- [ ] 实现用户端预订 API
- [ ] 实现管理端预订管理 API

## Phase 5: 咨询记录管理 ⏳

### 任务 5.1: 创建咨询服务
- [ ] 创建 `campsite-inquiry.service.ts`
- [ ] 实现创建咨询
- [ ] 实现查询咨询
- [ ] 实现更新咨询状态

### 任务 5.2: 创建咨询控制器
- [ ] 创建 `campsite-inquiry.controller.ts`
- [ ] 实现用户端咨询 API
- [ ] 实现管理端咨询管理 API

## Phase 6: 营地评价管理 ⏳

### 任务 6.1: 创建评价服务
- [ ] 创建 `campsite-review.service.ts`
- [ ] 实现创建评价
- [ ] 实现查询评价
- [ ] 实现删除评价

### 任务 6.2: 创建评价控制器
- [ ] 创建 `campsite-review.controller.ts`
- [ ] 实现用户端评价 API
- [ ] 实现管理端评价管理 API

## Phase 7: 路由配置 ⏳

### 任务 7.1: 配置路由
- [ ] 在 `routes/index.ts` 中注册营地路由
- [ ] 配置用户端路由
- [ ] 配置管理端路由

## Phase 8: 测试开发 ⏳

### 任务 8.1: 编写测试
- [ ] 营地管理测试
- [ ] 预订管理测试
- [ ] 咨询管理测试
- [ ] 评价管理测试

## Phase 9: API 文档编写 ⏳

### 任务 9.1: 编写 API 文档
- [ ] 创建 `CAMPSITE_API.md`
- [ ] 文档化所有用户端 API
- [ ] 文档化所有管理端 API
- [ ] 添加请求/响应示例

## Phase 10: 验收与归档 ⏳

### 任务 10.1: 代码质量检查
- [ ] 运行 TypeScript 编译检查
- [ ] 运行测试
- [ ] 修复所有错误

### 任务 10.2: 更新文档
- [ ] 更新 `docs/开发进度管理.md`
- [ ] 记录完成情况

## 进度统计

- 总任务数：10 个 Phase
- 已完成：0 个
- 进行中：0 个
- 未开始：10 个
- 完成率：0%

